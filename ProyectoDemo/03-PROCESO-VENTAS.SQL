
CREATE TABLE VENTA
( 
	IDVENTA              integer  NOT NULL ,
	IDCLIENTE            integer  NOT NULL ,
	FECHA                datetime  NOT NULL ,
	IDEMPLEADO           integer  NOT NULL ,
	IDREPARTIDOR         integer  NOT NULL ,
	REPARTODISTRITO      integer  NOT NULL ,
	REPARTODIRECCION     varchar(150)  NOT NULL ,
	COSTOENVIO           numeric(12,2)  NOT NULL ,
	BASEIMPONIBLE        numeric(12,2)  NOT NULL ,
	IMPUESTO             numeric(12,2)  NOT NULL ,
	TOTAL                numeric(12,2)  NOT NULL ,
	CONSTRAINT XPKVENTA PRIMARY KEY (IDVENTA ASC),
	CONSTRAINT FK_VENTA_CLIENTE FOREIGN KEY (IDCLIENTE) REFERENCES CLIENTE(IDCLIENTE)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VENTA_USUARIO FOREIGN KEY (IDEMPLEADO) REFERENCES USUARIO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VENTA_REPARTIDOR FOREIGN KEY (IDREPARTIDOR) REFERENCES REPARTIDOR(IDREPARTIDOR)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VENTA_REPARTO_DISTRITO FOREIGN KEY (REPARTODISTRITO) REFERENCES DISTRITO(IDDISTRITO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE DETALLEVENTA
( 
	IDVENTA              integer  NOT NULL ,
	IDPRODUCTO           integer  NOT NULL ,
	CANTIDAD             integer  NOT NULL ,
	PRECIO               numeric(12,2)  NOT NULL ,
	SUBTOTAL             numeric(12,2)  NOT NULL ,
	CONSTRAINT XPKDETALLEVENTA PRIMARY KEY (IDVENTA ASC,IDPRODUCTO ASC),
	CONSTRAINT FK_DETALLE_VENTA FOREIGN KEY (IDVENTA) REFERENCES VENTA(IDVENTA)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_DETALLE_PRODUCTO FOREIGN KEY (IDPRODUCTO) REFERENCES PRODUCTO(IDPRODUCTO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go


