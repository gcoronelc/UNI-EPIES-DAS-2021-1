-- BASE DE DATOS

CREATE DATABASE SISTFLORES;
GO

USE SISTFLORES;
GO

-- TABLAS

CREATE TABLE EMPLEADO
( 
	IDEMPLEADO           integer IDENTITY ( 1,1 ) ,
	NOMBRE               varchar(100)  NOT NULL ,
	APELLIDO             varchar(100)  NOT NULL ,
	DISTRITO             varchar(60)  NOT NULL ,
	CORREO               varchar(60)  NOT NULL ,
	TELEFONO             varchar(20)  NOT NULL ,
	ACTIVO               integer  NOT NULL 
	CONSTRAINT DF_EMPLEADO_ACTIVO
		 DEFAULT  1
	CONSTRAINT CK_EMPLEADO_ACTIVO
		CHECK  ( [ACTIVO]=0 OR [ACTIVO]=1 ),
	CONSTRAINT XPKEMPLEADO PRIMARY KEY (IDEMPLEADO ASC)
)
go



CREATE TABLE ROL
( 
	IDROL                integer  NOT NULL ,
	NOMBRE               varchar(60)  NOT NULL ,
	CONSTRAINT XPKROL PRIMARY KEY (IDROL ASC)
)
go



CREATE TABLE USUARIO
( 
	IDEMPLEADO           integer  NOT NULL ,
	USUARIO              varchar(60)  NOT NULL ,
	CLAVE                varchar(60)  NOT NULL ,
	IDROL                integer  NOT NULL ,
	ACTIVO               integer  NOT NULL 
	CONSTRAINT DF_USUARIO_ACTIVO
		 DEFAULT  1
	CONSTRAINT CK_USUARIO_ACTIVO
		CHECK  ( [ACTIVO]=0 OR [ACTIVO]=1 ),
	CONSTRAINT XPKUSUARIO PRIMARY KEY (IDEMPLEADO ASC),
	CONSTRAINT FK_USUARIO_EMPLEADO FOREIGN KEY (IDEMPLEADO) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_USUARIO_ROL FOREIGN KEY (IDROL) REFERENCES ROL(IDROL)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go


-- DATOS

SET IDENTITY_INSERT EMPLEADO ON;
GO

INSERT INTO EMPLEADO(IDEMPLEADO, NOMBRE, APELLIDO, DISTRITO, CORREO, TELEFONO, ACTIVO)
VALUES(1, 'JUAN ANTOTNIO', 'ARIAS ROJAS', 'MIRAFLORES', 'jarias@gmail.com', '986743562', 1);
GO

INSERT INTO EMPLEADO(IDEMPLEADO, NOMBRE, APELLIDO, DISTRITO, CORREO, TELEFONO, ACTIVO)
VALUES(2, 'GERALDO ELOY', 'CAMPOS PALPA', 'LINCE', 'gcampos@gmail.com', '956438792', 1);
GO

INSERT INTO EMPLEADO(IDEMPLEADO, NOMBRE, APELLIDO, DISTRITO, CORREO, TELEFONO, ACTIVO)
VALUES(3, 'SANDRA JIMENA', 'CHAUCA LLAMOCA', 'LINCE', 'schauca@gmail.com', '986743562', 1);
GO

INSERT INTO EMPLEADO(IDEMPLEADO, NOMBRE, APELLIDO, DISTRITO, CORREO, TELEFONO, ACTIVO)
VALUES(4, 'DANIEL FRANCISCO', 'MENDOZA ENRIQUE', 'LOS OLIVOS', 'dmendoza@gmail.com', '986743562', 1);
GO
 

INSERT INTO EMPLEADO(IDEMPLEADO, NOMBRE, APELLIDO, DISTRITO, CORREO, TELEFONO, ACTIVO)
VALUES(5, 'NATALY MILAGROS', 'SALCEDO GUERRA', 'LOS OLIVOS', 'nsalcedo@gmail.com', '9345765348', 1);
GO

SET IDENTITY_INSERT EMPLEADO OFF;
GO




INSERT INTO ROL(IDROL, NOMBRE) VALUES( 1, 'OWNER' );
INSERT INTO ROL(IDROL, NOMBRE) VALUES( 2, 'ADMINISTRADOR' );
INSERT INTO ROL(IDROL, NOMBRE) VALUES( 3, 'OPERADOR' );
GO


INSERT INTO USUARIO(IDEMPLEADO, USUARIO, CLAVE, IDROL, ACTIVO) VALUES(1, 'jarias', 'ganador', 1, 1);
INSERT INTO USUARIO(IDEMPLEADO, USUARIO, CLAVE, IDROL, ACTIVO) VALUES(2, 'gcampos', 'astuto', 2, 1);
INSERT INTO USUARIO(IDEMPLEADO, USUARIO, CLAVE, IDROL, ACTIVO) VALUES(3, 'schauca', 'princesa', 3, 1);
INSERT INTO USUARIO(IDEMPLEADO, USUARIO, CLAVE, IDROL, ACTIVO) VALUES(4, 'dmendoza', 'cazador', 3, 0);
go


select * from usuario;
go


